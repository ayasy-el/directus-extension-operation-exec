import{exec as o}from"child_process";var e={id:"exec_cmd",handler:({cmd:e,wait:r,timeout:t})=>new Promise(((s,c)=>{let d=o(e),[l,n]=["",!1];const i=()=>{n||(n=!0,setTimeout((()=>{s({log:l})}),t??0))};d.stdout.on("data",(o=>{console.log(`stdout: ${o}`),l+=o,r||i()})),d.stderr.on("data",(o=>{console.error(`stderr: ${o}`),l+=o,r||i()})),d.on("close",(o=>{console.log(`exec process exited with code ${o}`),l+=`Exit code: ${o}`,s({log:l})})),d.on("error",(o=>{console.error(`Error: ${o}`),c(o)}))}))};export{e as default};
